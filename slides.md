---
theme: default
highlighter: shiki
lineNumbers: false
title: Nuance on Kubernetes
info: |
  –°–µ–π—á–∞—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏ Kubernetes –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–µ-—Ñ–∞–∫—Ç–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ¬´–≤ –±–æ—é¬ª. –ò –∑–∞–ø—É—Å—Ç–∏—Ç—å-—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ ¬´–∫—É–±–µ¬ª –Ω–µ—Å–ª–æ–∂–Ω–æ, –Ω–æ –∫–∞–∫ –≤—Å–µ–≥–¥–∞ –µ—Å—Ç—å –Ω—é–∞–Ω—Å –∏ –Ω–µ –æ–¥–∏–Ω. –û–±—Å—É–¥–∏–º, —á—Ç–æ –Ω—É–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∏ –∞–¥–º–∏–Ω—É —É—á–µ—Å—Ç—å –∏ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–ª–æ –±—ã—Å—Ç—Ä–æ –∏ –Ω–∞–¥—ë–∂–Ω–æ, –Ω–µ —Ç—Ä–µ–±—É—è –∫ —Å–µ–±–µ –æ—Å–æ–±–æ–≥–æ –≤–Ω–∏–º–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç requests –∏ limits –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã, —á–µ–º –¥–æ–ª–∂–Ω—ã –æ—Ç–ª–∏—á–∞—Ç—å—Å—è liveness –∏ readiness –ø—Ä–æ–±—ã, –∏ –Ω–∞ —á—Ç–æ —Å–ª–µ–¥—É–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ –∏ —Ç–∞–∫ –¥–∞–ª–µ–µ.

drawings:
  persist: false

fonts:
  provider: 'none'
  fallback: false
  local: 'Martian Grotesk,Martian Mono'
  sans: 'Martian Grotesk'
  serif: 'Martian Grotesk'
  mono: 'Martian Mono'

---

# <span class="wobbling">–ù—é–∞–Ω—Å—ã</span><span class="block text-xl ultra-expanded">–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤</span><span class="ultra-condensed">Kubernetes</span>

<div class="absolute bottom-0 my-2">
–ù–æ–≤–∏–∫–æ–≤ –ê–Ω–¥—Ä–µ–π, –ó–ª—ã–µ –º–∞—Ä—Å–∏–∞–Ω–µ<br />
<small><a href="https://www.trampoline.to/event/trampoline-8">Trampoline meetup #8</a></small><br />
<small><time datetime="2022-02-24">24 —Ñ–µ–≤—Ä–∞–ª—è 2022</time></small>
</div>

<div class="absolute bottom-0 right-0 h-40 scaled-image flex">
  <a href="https://evilmartians.com/" class="w-40 h-40 p-3"><img alt="Evil Martians" src="/images/01_Evil-Martians_Logo_v2.1_RGB.svg" /></a>
  <a href="https://www.trampoline.to/" class="w-40 h-40 p-4"><img alt="Trampoline" src="/images/trampoline-logo-512x512.png" /></a>
</div>

<style>
  a { border-bottom: none !important; }

  .wobbling {
    animation-duration: 1s;
    animation-name: wobbling;
    animation-iteration-count: infinite;
    animation-direction: alternate;
    animation-direction: alternate;
  }

  .ultra-condensed {
    font-stretch: 3%;
  }

  .ultra-expanded {
    font-stretch: 9%;
  }

  @keyframes wobbling {
    from {
      font-weight: 40;
      font-stretch: 9%;
    }

    to {
      font-weight: 200;
      font-stretch: 7%;
    }
  }
</style>

<!--
–ù–∞—á–Ω—ë–º —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä —Å –¥–æ–≤–æ–ª—å–Ω–æ —Ö–∞—Ä–¥–∫–æ—Ä–Ω–æ–π —Ç–µ–º—ã, –ø–æ–∫–∞ –≤—ã —Å–≤–µ–∂–µ–Ω—å–∫–∏–µ. –ü–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ –º–æ–∂–Ω–æ —Ö–∏—Ç—Ä–æ —Å—Ç—Ä–µ–ª—è—Ç—å —Å–µ–±–µ –≤ –Ω–æ–≥–∏ —Å –ø–æ–º–æ—â—å—é –Ω–∞—Å—Ç—Ä–æ–µ–∫ Kubernetes, —á—Ç–æ–±—ã, —Ä–∞–∑—É–º–µ–µ—Ç—Å—è, –æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–∏ –Ω–æ–≥–∏ –≤ —Ü–µ–ª–æ—Å—Ç–∏ –∏ —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç–∏.
-->

---
layout: full
---

<a href="https://github.com/Envek/"><img src="/images/github-envek.png" class="object-contain text-center m-auto h-full w-full max-h-full max-w-full" /></a>

<!--
–í—Å–µ–º –ø—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–Ω–¥—Ä–µ–π, —è Ruby-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –∞ –µ—â—ë‚Ä¶
-->

---

<a href="https://evilmartians.com/?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes"><img alt="Evil Martians" src="/images/01_Evil-Martians_Logo_v2.1_RGB.svg" class="object-contain text-center m-auto max-h-112"/></a>

<!--
‚Ä¶—è –ú–∞—Ä—Å–∏–∞–Ω–∏–Ω.
-->

---

# –ú–∞—Ä—Å–∏–∞–Ω—Å–∫–∏–π Open Source

<div class="grid grid-cols-4 grid-rows-2 gap-4">
  <a href="https://github.com/yabeda-rb/yabeda">
    <figure>
      <img alt="Yabeda" src="/images/martian-oss/yabeda.svg" class="scaled-image h-40 mx-auto" />
      <figcaption>Yabeda: Ruby application instrumentation framework</figcaption>
    </figure>
  </a>
  <a href="https://github.com/evilmartians/lefthook">
    <figure>
      <img alt="LeftHook" src="/images/martian-oss/lefthook.svg" class="scaled-image h-40 mx-auto" />
      <figcaption>Lefthook: git hooks manager</figcaption>
    </figure>
  </a>
  <a href="https://anycable.io/">
    <figure>
      <img alt="AnyCable" src="/images/martian-oss/anycable.svg" class="scaled-image h-40 mx-auto" />
      <figcaption>AnyCable: Polyglot replacement for ActionCable server</figcaption>
    </figure>
  </a>
  <a href="https://postcss.org/">
    <figure>
      <img alt="PostCSS" src="/images/martian-oss/postcss.svg" class="scaled-image h-40 mx-auto" />
      <figcaption>PostCSS: A tool for transforming CSS with JavaScript</figcaption>
    </figure>
  </a>
  <a href="https://imgproxy.net/">
    <figure>
      <img alt="Imgproxy" src="/images/martian-oss/imgproxy.svg" class="scaled-image h-40 mx-auto" />
      <figcaption>Imgproxy: Fast and secure standalone server for resizing and converting remote images</figcaption>
    </figure>
  </a>
  <a href="https://logux.io/">
    <figure>
      <img alt="Logux" src="/images/martian-oss/logux.svg" class="scaled-image h-40 mx-auto" />
      <figcaption>Logux: Client-server communication framework based on Optimistic UI, CRDT, and log</figcaption>
    </figure>
  </a>
  <a href="https://github.com/DarthSim/overmind">
    <figure>
      <img alt="Overmind" src="/images/martian-oss/overmind.svg" class="scaled-image h-40 mx-auto" />
      <figcaption>Overmind: Process manager for Procfile-based applications and tmux </figcaption>
    </figure>
  </a>
  <a href="https://evilmartians.com/oss">
    <figure>
      <div class="h-40 text-2xl flex items-center justify-center">
        <qr-code-vue value="https://evilmartians.com/oss" class="scaled-image w-full h-full mx-auto p-4" render-as="svg" />
      </div>
      <figcaption style="font-size: 0.5rem;">–ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ –Ω–∞ evilmartians.com/oss</figcaption>
    </figure>
  </a>
</div>

<style>
  a { border-bottom: none !important; }
  figcaption {
    font-size: 0.4rem;
    line-height: 1rem;
  }
</style>

<!--
–ú–∞—Ä—Å–∏–∞–Ω–µ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —Å–µ–±–µ –Ω–∞ —Ö–ª–µ–± –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –∑–∞–∫–∞–∑–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–æ–π –∏ –∫–æ–Ω—Å–∞–ª—Ç–∏–Ω–≥–æ–º –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —à—Ç–∞—Ç–æ–≤—Å–∫–∏—Ö —Å—Ç–∞—Ä—Ç–∞–ø–æ–≤, –Ω–æ –Ω–∞—Å –≤—ã —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –∑–Ω–∞–µ—Ç–µ –ø–æ –Ω–∞—à–∏–º –æ–ø–µ–Ω—Å–æ—Ä—Å-–ø—Ä–æ–µ–∫—Ç–∞–º, –∫–æ—Ç–æ—Ä—ã–º–∏ –º—ã –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –≥–æ—Ä–¥–∏–º—Å—è –∏ –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏–∑–≤–ª–µ—á–µ–Ω—ã –∏–∑ –Ω–µ–¥—Ä –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –º—ã —É—Å–∏–ª–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Ö –≤–µ–∑–¥–µ, –≥–¥–µ —Ç–æ–ª—å–∫–æ –º–æ–∂–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏ –≤—ã.

–ö—Å—Ç–∞—Ç–∏, –≤–æ—Ç —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç, —Å–≤–µ—Ä—Ö—É —Å–ª–µ–≤–∞, –Ø–±–µ–¥–∞ ‚Äî –º–æ—ë –¥–µ—Ç–∏—â–µ. –ò –æ–Ω –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ Kubernetes. –°–∫–æ—Ä–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫–æ–µ.
-->

---
layout: full
---

<a href="https://evilmartians.com/?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes"><img alt="Evil Martians" src="/images/Evil-Martians_Logo_Kubernetes.svg" class="text-center m-auto"/></a>

<!--
–ù—É –≤–æ—Ç, –º—ã –≤—Å–µ —Ç–∞–∫–∏–µ –∑–ª—ã–µ –∏ –º–æ–∂–µ–º –≤ –ö—É–±–µ—Ä–Ω–µ—Ç–µ—Å. –õ—é–±–∏–º, —É–º–µ–µ–º, –ø—Ä–∞–∫—Ç–∏–∫—É–µ–º, –∫–∞–∫ –≥–æ–≤–æ—Ä–∏—Ç—Å—è.
-->

---
layout: intro
---

# Kubernetes 101

–®–æ, –∫–∞–∫–æ–π –µ—â—ë Kubernetes?

<!--
–°–µ–≥–æ–¥–Ω—è —è –Ω–µ –±—É–¥—É —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å, –∫–∞–∫ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ ¬´–∫—É–±¬ª. –£ –≤–∞—Å –ª–∏–±–æ —É–∂–µ –µ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Kubernetes –∏ –≤–∞–º –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ —É–∑–Ω–∞—Ç—å –æ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø–æ–¥–≤–æ–¥–Ω—ã—Ö –∫–∞–º–Ω—è—Ö –ø—Ä–∏ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏, –ª–∏–±–æ –≤–∞–º –±—É–¥–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –ø–æ—Å–ª—É—à–∞—Ç—å –æ –≤—Å—è–∫–∏—Ö —Ç–∞–∫–∏—Ö —Ç–æ–Ω–∫–æ—Å—Ç—è—Ö.
–ù–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Å –∫—É–±–æ–º –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–ª, –≤—Å—ë –∂–µ –Ω—É–∂–Ω–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç ‚Äî¬†–ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã –≤—ã –ø–æ–Ω–∏–º–∞–ª–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–µ.
-->

---

## –ó–∞—á–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∑–Ω–∞—Ç—å Kubernetes?

TL;DR: –ß—Ç–æ–±—ã –±—ã—Å—Ç—Ä–µ–µ –¥–µ–ø–ª–æ–∏—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ —Å–∞–º–∏–º –∏ –Ω–µ –∂–¥–∞—Ç—å –∞–¥–º–∏–Ω–æ–≤/–¥–µ–≤–æ–ø—Å–æ–≤.

- [Kubernets'–∞ –±–æ—è—Ç—å—Å—è ‚Äî –≤ –¥–µ–ø–ª–æ–π –Ω–µ —Ö–æ–¥–∏—Ç—å](https://youtu.be/bOpBWZt9HPM) –æ—Ç –º–∞—Ä—Å–∏–∞–Ω—Å–∫–æ–≥–æ SRE.

  <div class="flex">
  <Youtube id="bOpBWZt9HPM" class="max-h-36" />
  <qr-code url="https://youtu.be/bOpBWZt9HPM" class="ml-16 w-36 h-36 px-0 py-0" />
  </div>

- [–í–µ—á–µ—Ä–Ω—è—è —à–∫–æ–ª–∞ Kubernetes –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤](https://www.youtube.com/playlist?list=PL8D2P0ruohOBSA_CDqJLflJ8FLJNe26K-) –æ—Ç Slurm.io

  <div class="flex">
  <Youtube id="Mw_rEH2pElw" class="max-h-36" />
  <qr-code url="https://www.youtube.com/playlist?list=PL8D2P0ruohOBSA_CDqJLflJ8FLJNe26K-" class="ml-16 w-36 px-0 py-0" />
  </div>

<!--
–¢–∞–∫, –∞ –ø–æ—á–µ–º—É –≤–æ–æ–±—â–µ —Å–µ–π—á–∞—Å –ø—Ä–æ Kubernetes, –∫–∞–∑–∞–ª–æ—Å—å –±—ã —á–∏—Å—Ç–æ –∞–¥–º–∏–Ω—Å–∫—É—é —Ç–µ–º—É, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–µ –∞–¥–º–∏–Ω, –Ω–µ DevOps, –∞ –∫–∞–∫ —Ä–∞–∑ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ (—ç—Ç–æ —è, –ø—Ä–∏–≤–µ—Ç), –∫–æ—Ç–æ—Ä—ã–π –∫–∞–∫ —Ä–∞–∑ –ø–∏–ª–∏—Ç —Ñ–∏—á–∏  –∏ —Ñ–∏–∫—Å–∏—Ç –±–∞–≥–∏. –ó–∞—á–µ–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∑–Ω–∞—Ç—å –∞–¥–º–∏–Ω—Å–∫–æ–µ?

–í–æ-–ø–µ—Ä–≤—ã—Ö, —ç—Ç–æ –¥–æ–≤–æ–ª—å–Ω–æ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –º–æ–∂–Ω–æ –Ω–µ –∂–¥–∞—Ç—å –ø–æ–º–æ—â–∏ –∞–¥–º–∏–Ω–∞ –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–æ–≤–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∞ —Å–¥–µ–ª–∞—Ç—å —Ç–∏–ø–æ–≤—É—é –∑–∞–¥–∞—á—É —Å–∞–º–æ–º—É. –≠—Ç–æ –±—ã—Å—Ç—Ä–æ.

–í–æ-–≤—Ç–æ—Ä—ã—Ö, –∫–æ–≥–¥–∞ –∞–¥–º–∏–Ω –≤—Å—ë –∂–µ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è, —Ç–æ –æ–Ω –≤—Å—ë —Ä–∞–≤–Ω–æ –∑–∞—Å—Ç–∞–≤–∏—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–∞–∫—É—é-—Ç–æ –æ–±–≤—è–∑–∫—É –¥–ª—è –ö—É–±–∞ ‚Äî –≤—ã—Å—Ç–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –º–µ—Ç—Ä–∏–∫, —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Ö–µ–ª—Å—á–µ–∫–æ–≤, –Ω–∞—á–Ω—ë—Ç –∑–∞–¥–∞–≤–∞—Ç—å –Ω–µ—É–¥–æ–±–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –≤–∏–¥–∞ ¬´–∞ —Å–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ –Ω–∞–¥–æ, –∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞?¬ª.

–ú–æ–∂–Ω–æ —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –≤—Å–µ–º –≤—Ä–µ–º—è –∏ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ —Å–∞–º–∏–º, –∑–∞—Ä–∞–Ω–µ–µ.

–ü–æ—ç—Ç–æ–º—É –º—ã –≤ –ú–∞—Ä—Å–∏–∞–Ω–∞—Ö –Ω–∞—á–∞–ª–∏ –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —à–∫–æ–ª—É Kubernetes –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∏ —Å–æ–≤—Å–µ–º –Ω–µ–¥–∞–≤–Ω–æ —Ä–µ–±—è—Ç–∞ –∏–∑ Slurm –≤—ã–ø—É—Å—Ç–∏–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –≤–∏–¥–µ–æ–∫—É—Ä—Å –ø—Ä–æ —ç—Ç–æ –∂–µ, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å–º–µ–ª–æ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞—Ç—å.

–ï—Å–ª–∏ –≤—ã —Ç–æ–∂–µ —Å—á–∏—Ç–∞–µ—Ç–µ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º, —Ç–æ —è –æ—Ç–ø—Ä–∞–≤–ª—é –≤–∞—Å —Å–Ω–∞—á–∞–ª–∞ –∫ –ö–∏—Ä—É ‚Äî¬†–Ω–∞—à–µ–º—É –≥–ª–∞–≤–Ω–æ–º—É –ø–æ –∫—É–±–∞–º –∏ –≤—Å–µ–º—É –∞–¥–º–∏–Ω—Å–∫–æ–º—É, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª –æ —Ç–æ–º, —á—Ç–æ, –∑–∞—á–µ–º, –ø–æ—á–µ–º—É –∏ –∫–∞–∫. –ù—É –∞ –ø–æ—Ç–æ–º –∫ —Å–ª—ë—Ä–º–æ–≤—Ü–∞–º, –æ–±—É—á–∞—Ç—å—Å—è.
-->

---
layout: footnote
footnoteClass: text-sm
---

## –ß—Ç–æ —Ç–∞–∫–æ–µ Kubernetes‚Ä¶

- **–ö–ª–∞—Å—Ç–µ—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** –¥–ª—è –¥–µ–ø–ª–æ—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

- –ê–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç –Ω–∏–∂–µ–ª–µ–∂–∞—â–µ–≥–æ –∂–µ–ª–µ–∑–∞/–æ–±–ª–∞–∫–æ–≤\*

- –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π control loop

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç (Docker-)–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π‚Ä¶

- ‚Ä¶–∏ —Å–≤–æ–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –¥–ª—è –∏—Ö –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø—É—Å–∫–∞

::footnote::

\* https://buttondown.email/nelhage/archive/two-reasons-kubernetes-is-so-complex/

<!--
–°–µ–≥–æ–¥–Ω—è –∂–µ –º—ã –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–æ –ø–æ–≥–æ–≤–æ—Ä–∏–º –æ —Ç–æ–º, —á—Ç–æ —Ç–∞–∫–æ–µ ¬´–∫—É–±¬ª –∏ –∏–∑ —á–µ–≥–æ –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç, –ø—Ä–æ—Å—Ç–æ —á—Ç–æ–±—ã —É –≤–∞—Å –±—ã–ª–æ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –¥–ª—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.

–ú–Ω–æ–≥–∏–º Kubernetes –∫–∞–∂–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω–æ–π –¥–µ–ø–ª–æ–∏–ª–∫–æ–π, –¥–∞–∂–µ –Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ —Å–ª–æ–∂–Ω–æ–π. –û–Ω —Å–ª–æ–∂–Ω—ã–π ‚Äî —ç—Ç–æ –ø—Ä–∞–≤–¥–∞. –ù–æ —ç—Ç–æ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω–æ.

–î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ ¬´–∫—É–±¬ª ‚Äî —ç—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ –ª–∏—à—å –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ï–≥–æ –ø–æ–ª–µ–∑–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É. –ö–∞–∫ Windows, Linux, macOS, Android –∏ –ø—Ä–æ—á–∏–µ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É—é—Ç ¬´–∂–µ–ª–µ–∑–æ¬ª –∫–æ–º–ø—å—é—Ç–µ—Ä–∞ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç –∫–∞–∫–æ–π-—Ç–æ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π API –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º, —Ç–∞–∫ –∏ Kubernetes –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –æ—Ç –≤–∞—Å –Ω–∞—Å—Ç–æ—è—â–∏–µ —Å–µ—Ä–≤–µ—Ä–∞, —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ –∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–≤–æ–π API

–¢.–µ. –≤ ¬´–∫—É–±–µ¬ª –≤–∞–º –±–æ–ª—å—à–µ –Ω–µ –≤–∞–∂–Ω–æ, —Å–∫–æ–ª—å–∫–æ —É –≤–∞—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ –∏ —Å–∫–æ–ª—å–∫–æ —É –Ω–∏—Ö —è–¥–µ—Ä –∏ –≥–∏–≥–∞–±–∞–π—Ç, –∫–∞–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –∫–∞–∫–∞—è –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏ —Å–µ—Ç—å. –ò —Ç–æ, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä–∞ –ª–æ–º–∞—é—Ç—Å—è –∏–ª–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –≤–∞—Å —Ç–æ–∂–µ –≤–æ–ª–Ω–æ–≤–∞—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ.

–ü–æ—ç—Ç–æ–º—É API –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π: –≤—ã –ø—Ä–æ—Å—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç–µ –ö—É–±–µ—Ä–Ω–µ—Ç–∏—Å—É: ¬´–º–Ω–µ –Ω–∞–¥–æ, —á—Ç–æ–±—ã –≤–æ—Ç —ç—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –±—ã–ª–∏ –∑–∞–ø—É—â–µ–Ω—ã –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–ª–∏ —Ç—Ä–∞—Ñ–∏–∫ –Ω–∞ —Ç–∞–∫–æ–º-—Ç–æ –¥–æ–º–µ–Ω–µ –∏ —Ç–∞–∫–æ–º-—Ç–æ –ø–æ—Ä—Ç—É. –î–µ–ª–∞–π.¬ª –ò –æ–Ω –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å.
-->

---
layout: footnote
footnoteClass: relative
---

## ‚Ä¶–∏ –∏–∑ —á–µ–≥–æ –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç

<a href="https://www.slideshare.net/KirillKouznetsov/how-to-learn-k8s-for-developers/27" target="_blank">
<img src="/images/how-to-learn-k8s-for-developers-27-1024.webp" class="scaled-image max-h-104 text-center mx-auto" />
</a>

::footnote::

–ò—Å—Ç–æ—á–Ω–∏–∫: [Kubernets'–∞ –±–æ—è—Ç—å—Å—è ‚Äî –≤ –¥–µ–ø–ª–æ–π –Ω–µ —Ö–æ–¥–∏—Ç—å (—Å–ª–∞–π–¥—ã)](https://www.slideshare.net/KirillKouznetsov/how-to-learn-k8s-for-developers/)

<qr-code url="https://www.slideshare.net/KirillKouznetsov/how-to-learn-k8s-for-developers/27" class="absolute bottom-0 right-0 w-36 max-h-36" />

<!--
–ò –¥–ª—è –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∫—É—á–∞ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π ‚Äî –¥–µ—Å—è—Ç–∫–∏ –∏—Ö. –ü—Ä–∏–∫–ª–∞–¥–Ω–æ–º—É —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–Ω–∞—Ç—å –≤—Å–µ–≥–æ –ø—è—Ç–æ–∫ –≤ –æ–±—â–µ–º-—Ç–æ, –æ–Ω–∏ –≤—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –Ω–∞ —Å–ª–∞–π–¥–µ.
 - Pod ‚Äî —ç—Ç–æ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –Ω–∞–≥—Ä—É–∑–∫–∏
 - Replica Set –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –¥–µ–ª–∞—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
 - Deployment –Ω—É–∂–µ–Ω –¥–ª—è –±–µ—Å—à–æ–≤–Ω—ã—Ö –¥–µ–ø–ª–æ–µ–≤, –±–µ–∑ –¥–∞—É–Ω—Ç–∞–π–º–∞
- Service –¥–∞—ë—Ç –Ω–∞–º –±–∞–∑–æ–≤—É—é –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫—É —Ç—Ä–∞—Ñ–∏–∫–∞ –∏ service discovery
- Ingress –¥–∞—ë—Ç –Ω–∞–º –≥–∏–±–∫–æ—Å—Ç—å –≤ –º–∞—Ä—à—Ä—É—Ç–∏–∞—Ü–∏–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ HTTP
- –ù—É –∞ Helm ‚Äî —ç—Ç–æ –ø–∞–∫–µ—Ç–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä (–∫–∞–∫–∞—è –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –±–µ–∑ –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –º–µ–Ω–µ–¥–∂–µ—Ä–∞).

–ù–æ –¥–ª—è —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–≥–æ –¥–æ–∫–ª–∞–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –≤—Å–µ–≥–æ –¥–≤–∞ –∏–∑ —ç—Ç–∏—Ö —Å–∏–Ω–∏—Ö –≤–∞–¥—Ä–∞—Ç–∏–∫–æ–≤, –∏—Ö —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø–æ–ø–æ–¥—Ä–æ–±–Ω–µ–µ.
-->

---
layout: two-cols
class: relative
---

## Pod

 - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –≥–ª–∞–≤–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞ –≤ k8s ‚Äî¬†¬´–∞—Ç–æ–º¬ª ‚öõÔ∏è

 - –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–¥–µ–ª–∏–º–∞—è –≥—Ä—É–ø–ø–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (–Ω–æ –æ–±—ã—á–Ω–æ 1 –æ—Å–Ω–æ–≤–Ω–æ–π)

 - –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ –Ω–∞ –æ–¥–Ω–æ–π –º–∞—à–∏–Ω–µ

 - –¥–µ–ª—è—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π localhost –∏ —Å–µ—Ç—å

 - –µ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏–∫–ª–∞—Å—Ç–µ—Ä–Ω—ã–π IP-–∞–¥—Ä–µ—Å

 - —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ‚Äî –∫–∞–∫ –±—É–¥—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä

<div class="absolute bottom-0 text-sm">
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: <a href="https://kubernetes.io/docs/concepts/workloads/pods/" target="_blank">kubernetes.io/docs/concepts/workloads/pods</a>
</div>

::right::

<img src="/images/kubernetes_nodes_pods.svg" class="scaled-image">


<div class="absolute bottom-0 text-sm">
–ö–∞—Ä—Ç–∏–Ω–∫–∞: <a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/explore/explore-intro/" target="_blank">kubernetes.io/docs/tutorials/kubernetes-basics/explore/explore-intro</a>
</div>

<!--
–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∞—Ç–æ–º–∞—Ä–Ω–∞—è –µ–¥–∏–Ω–∏—Ü–∞, –∫–æ—Ç–æ—Ä–æ–π –æ–ø–µ—Ä–∏—Ä—É–µ—Ç Kubernetes ‚Äî —ç—Ç–æ Pod, –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–¥–µ–ª–∏–º–∞—è –≥—Ä—É–ø–ø–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤. Pod —Å –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –∫–∞–∫ ¬´—Å—Ç—Ä—É—á–æ–∫¬ª –∏ –º–æ–∂–Ω–æ –µ–≥–æ —Å–µ–±–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å, –∫–∞–∫ –≥–æ—Ä–æ—Ö–æ–≤—ã–π —Å—Ç—Ä—É—á–æ–∫ —Å –≥–æ—Ä–æ—à–∏–Ω–∞–º–∏-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏.
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –æ–¥–Ω–æ–≥–æ –ø–æ–¥–∞ –≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–º–µ—Å—Ç–µ –Ω–∞ –æ–¥–Ω–æ–º —Ñ–∏—á–∏—á–µ—Å–∫–æ–º –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ –∏ –¥–µ–ª—è—Ç –º–µ–∂–¥—É —Å–æ–±–æ–π —Å–µ—Ç—å.

–§–∞–∫—Ç–∏—á–µ—Å–∫–∏, –ø–æ–¥ –º–æ–∂–Ω–æ –∏ –Ω—É–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ —Å–∞–º–æ—Å—Ç–æ—è–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä ‚Äî —É –Ω–µ–≥–æ –µ—Å—Ç—å —Å–≤–æ–π IP-–∞–¥—Ä–µ—Å –∏ –∏–º—è —Ö–æ—Å—Ç–∞.

–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –æ–¥–∏–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –ø–æ–¥–µ –æ—Å–Ω–æ–≤–Ω–æ–π, –∞ –¥—Ä—É–≥–∏–µ ‚Äî –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ. –ò—Ö –µ—â—ë –Ω–∞–∑—ã–≤–∞—é—Ç —Å–∞–π–¥–∫–∞—Ä–∞–º–∏ (—Ç–∞–∫ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º –º–æ—Ç–æ—Ü–∏–∫–ª–µ—Ç–Ω–∞—è –∫–æ–ª—è—Å–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è). –ù–∞–ø—Ä–∏–º–µ—Ä –∏–Ω—Å—Ç–∞–Ω—Å —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –∞ –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å —Å–±–æ—Ä—â–∏–∫–∏ –ª–æ–≥–æ–≤ –∏ –∫–æ–Ω—Ñ–∏–≥-–≤–æ—Ç—á–µ—Ä—ã ‚Äî —ç—Ç–æ —Å–∞–π–¥–∫–∞—Ä—ã.

–ù—É –∏ –¥–µ–∂—É—Ä–Ω–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ, —á—Ç–æ –Ω–µ –Ω–∞–¥–æ –ø—ã—Ç–∞—Ç—å—Å—è –∑–∞–ø–∏—Ö–∞—Ç—å –≤—Å—ë —Å–≤–æ—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –æ–¥–∏–Ω –ü–æ–¥.
-->

---
layout: two-cols
class: relative
---

## Service

 - –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è –ª–æ–≥–∏—á–µ—Å–∫–æ–π –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏ pod'–æ–≤

 - Service discovery ‚Äî¬†–µ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏–∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–µ DNS-–∏–º—è

 - –ë–∞–ª–∞–Ω—Å–∏—Ä—É—é—Ç —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É —Å–≤–æ–∏–º–∏ –ø–æ–¥–∞–º–∏ (round robin)

 - –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –∫–∞–∫ –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª iptables

 - –ü–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ

<div class="absolute bottom-0 text-sm">
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: <a href="https://kubernetes.io/docs/concepts/services-networking/service/" target="_blank">kubernetes.io/docs/concepts/services-networking/service</a>
</div>

::right::

<img src="/images/kubernetes_services.svg" class="scaled-image mt-16">

<div class="absolute bottom-0 text-sm">
–ö–∞—Ä—Ç–∏–Ω–∫–∞: <a href="https://kubernetes.io/docs/tutorials/kubernetes-basics/expose/expose-intro/" target="_blank">kubernetes.io/docs/tutorials/kubernetes-basics/expose/expose-intro</a>
</div>

<!--
–ü—Ä–æ–ø—É—Å—Ç–∏–º –ø–∞—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–≤–∞–¥—Ä–∞—Ç–∏–∫ ‚Ññ4 ‚Äî —Å–µ—Ä–≤–∏—Å.

–°–µ—Ä–≤–∏—Å—ã –ª–æ–≥–∏—á–µ—Å–∫–∏ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç –ø–æ–¥—ã, –∞ —Ç–∞–∫ –∂–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –±–∞–∑–æ–≤–æ —á–µ—Ä–µ–∑ Round Robin –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–∞—Ñ–∏–∫ –º–µ–∂–¥—É –Ω–∏–º–∏, –∞ —Ç–∞–∫ –∂–µ –¥–∞—é—Ç –∏–º DNS-–∏–º—è (–∏ —á–µ—Ä–µ–∑ DNS –∂–µ –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å service discovery)

–°–µ—Ä–≤–∏—Å –∂–∏–∑–Ω–µ–Ω–Ω–æ –≤–∞–∂–µ–Ω –ø—Ä–∏ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏. –ò —Ö–æ—Ç—è —Å–∞–º–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (ReplicaSet –∏ Deployment), —Å–µ—Ä–≤–∏—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞–º –≤–æ–æ–±—â–µ –Ω–µ –∑–∞–¥—É–º—ã–≤–∞—Ç—å—Å—è –æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏ –¥–µ–ø–ª–æ—è—Ö.

–ü–æ–¥ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Å–µ—Ä–≤–∏—Å, –∫–æ–≥–¥–∞:

 - –µ–≥–æ labels —Å–æ–≤–ø–∞–ª–∏ —Å matchlabels —É —Å–µ—Ä–≤–∏—Å–∞

 - —Ö–æ—Ç—è –±—ã —É –æ–¥–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç readiness check (–µ—Å–ª–∏ –µ—Å—Ç—å)
-->

---
layout: intro
---

# Healthcheck'–∏

–∑–∞—á–µ–º –∏—Ö —Å—Ç–æ–ª—å–∫–æ –∏ –≤ —á—ë–º —Ä–∞–∑–Ω–∏—Ü–∞?

<!--
–ò—Ç–∞–∫, –ª–∏–∫–±–µ–∑ –ø—Ä–æ–≤–µ–¥—ë–Ω, —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏ –∫ –Ω—é–∞–Ω—Å–∞–º –Ω–∞–∫–æ–Ω–µ—Ü –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å! –ò –ø–µ—Ä–≤—ã–º–∏ –Ω–∞ –æ—á–µ—Ä–µ–¥–∏ —É –Ω–∞—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–¥–æ—Ä–æ–≤—å—è –∏ —Ç—Ä—É–¥–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–∏–æ–∂–µ–Ω–∏–µ. –û–Ω–∏ –∂–µ —Ö—ç–ª—Å—á–µ–∫–∏.
-->

---
layout: footnote
footnoteClass: text-xs relative
---

## Kubernetes health probes

–£ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞** –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –ø–æ–¥–∞:

 - liveness

   –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–±–∏–≤–∞–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –µ—Å–ª–∏ –æ–Ω –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ ¬´—Ç—ã –∂–∏–≤?¬ª.

 - readiness

   –ü–æ–¥ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞ —á–µ—Ä–µ–∑ —Å–µ—Ä–≤–∏—Å, –µ—Å–ª–∏ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ ¬´–Ω—É —á—Ç–æ, –≥–æ—Ç–æ–≤?¬ª –∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ, –∫–æ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–µ—Ç —É—Ç–≤–µ—Ä–¥–∏—Ç–µ–ª—å–Ω–æ.

 - startup (k8s 1.20+)

   –ü–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç—Å—Ä–æ—á–∏—Ç—å –Ω–∞—á–∞–ª–æ liveness –∏ readiness –ø—Ä–æ–≤–µ—Ä–æ–∫ –¥–ª—è –¥–æ–ª–≥–æ–∑–∞–ø—É—Å–∫–∞—é—â–∏—Ö—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

<div class="text-sm border border-2 border-green-600 rounded-lg px-4 my-2 mr-32">

**–í–∞–∂–Ω–æ**: –∏ liveness –∏ readiness –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –≤—Å—ë –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏ –ø–æ–¥–∞.

</div>

::footnote::

https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/

<qr-code url="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-startup-probes/" class="w-28 px-0 absolute bottom-0 right-0" />

<!--
–ö–∞–∫ —è —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª ‚Äî API —É Kubernetes –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π –∏ –æ–¥–Ω–∞ –∏–∑ —Ü–µ–ª–µ–π ¬´–∫—É–±–∞¬ª ‚Äî self-healing, —Å–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ. –î–ª—è —ç—Ç–æ–≥–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–æ–ª–∂–Ω–∞ –∫–∞–∫-—Ç–æ –ø–æ–Ω–∏–º–∞—Ç—å, –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ¬´—É–º–µ—Ä¬ª –∏–ª–∏ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω, —á—Ç–æ–±—ã —ç—Ç–æ –∫–∞–∫-—Ç–æ –ø–æ—á–∏–Ω–∏—Ç—å.

–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–∏—Ö –ø—Ä–æ–±–ª–µ–º –µ—Å—Ç—å –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö ¬´–ø—Ä–æ–±—ã¬ª: –∂–∏–≤–æ—Å—Ç—å (liveness) –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å (readiness).

Liveness –ø—Ä–æ–±–∞ –ø—Ä–∏–∑–≤–∞–Ω–∞ –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ ¬´–∫—É–±¬ª –µ–≥–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç.

Readiness –ø—Ä–æ–≤–µ—Ä–∫–∞ –∂–µ –ø—Ä–∏–∑–≤–∞–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å, —á—Ç–æ –ø–æ–¥ –≥–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ç—Ä–∞—Ñ–∏–∫. –ù–µ–≥–æ—Ç–æ–≤—ã–π –ø–æ–¥ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∏–∑ —Å–µ—Ä–≤–∏—Å–∞ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –æ–Ω –Ω–µ —Å—Ç–∞–Ω–µ—Ç –≥–æ—Ç–æ–≤. –í–æ-–ø–µ—Ä–≤—ã—Ö, —ç—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—ã—Å—Ç—Ä–æ –Ω–∞—á–∏–Ω–∞—é—Ç –æ—Ç–≤–µ—á–∞—Ç—å –ø–æ HTTP, –Ω–æ –Ω–µ —Å—Ä–∞–∑—É –≥–æ—Ç–æ–≤—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã. –ù–æ —ç—Ç–æ –æ—á–µ–≤–∏–¥–Ω–æ, –ø—Ä–æ —ç—Ç–æ –≤—Å–µ –∑–Ω–∞—é—Ç, –∞ –≤–æ—Ç –ø—Ä–æ –Ω–µ —Ç–∞–∫–æ–π –æ—á–µ–≤–∏–¥–Ω—ã–π —Å–ª—É—á–∞–π –º—ã –ø–æ–≥–æ–≤–æ—Ä–∏–º –¥–∞–ª—å—à–µ‚Ä¶
-->

---
layout: two-cols
class: relative
---

## –ü—Ä–æ—Å—Ç–æ (–∏¬†–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ)

–û–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–æ–±—ã –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```yaml {all|3-8|9-14|5-6,11-12}
containers:
  - name: app
    livenessProbe:
      httpGet:
        path: /health
        port: 80
      timeoutSeconds: 3
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /health
        port: 80
      timeoutSeconds: 3
      periodSeconds: 10
```

::right::

<img src="/images/ctrl-c-ctrl-v-dump-2016.png" class="scaled-image p-12">

<div class="absolute bottom-0 text-xs">
–ö–∞—Ä—Ç–∏–Ω–∫–∞: <a href="https://www.behance.net/gallery/35173039/Stickers-for-another-one-IT-conference-(DUMP2016)" target="_blank">behance.net/gallery/35173039/Stickers-for-another-one-IT-conference-(DUMP2016)</a>
</div>

<!--
–ö–∞–∫ —ç—Ç–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏? –ù–∞—Ä–æ–¥ –¥–µ–ª–∞–µ—Ç –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç —Ç–∏–ø–∞ /health, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ—Å—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç 200 –∏ –≤—Å—ë.

(–∫–ª–∏–∫-–∫–ª–∏–∫-–∫–ª–∏–∫)

–ò —Å—Ç–∞–≤–∏—Ç –µ–≥–æ –Ω–∞ –æ–±–µ –ø—Ä–æ–±—ã —Å—Ä–∞–∑—É, —á—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ.
-->

---
layout: image
image: /images/what-is-the-difference.jpg
class: relative
---

<div class="absolute bottom-4 text-2xl text-center w-full">
–ê –∫–∞–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞?
</div>

<!--
¬´–ù–µ, –Ω—É –∞ —á–æ?¬ª —Å–∫–∞–∂–µ—Ç–µ –≤—ã?

–ö–∞–∫–∞—è —Ä–∞–∑–Ω–∏—Ü–∞? –û—Ç–≤–µ—á–∞–µ—Ç 200, –∑–Ω–∞—á–∏—Ç –∏ –∂–∏–≤ –∏ –≥–æ—Ç–æ–≤! –ü—Ä–∞–≤–∏–ª—å–Ω–æ?

–ü—Ä–∞–≤–∏–ª—å–Ω–æ, –ü–µ—Ç—å–∫–∞, –Ω–æ –µ—Å—Ç—å –æ–¥–∏–Ω –Ω—é–∞–Ω—Å‚Ä¶
-->

---
layout: footnote
footnoteClass: text-sm
---

## –û—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤

–ó–∞–ø—Ä–æ—Å—ã –∂–¥—É—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞/–±—ç–∫–µ–Ω–¥–∞ –≤ Nginx –∏–ª–∏ –∞–ø–ø-—Å–µ—Ä–≤–µ—Ä–µ.

<img src="/images/puma-request-queue.png" class="scaled-image text-center mx-auto max-h-96">

::footnote::

–ö–∞—Ä—Ç–∏–Ω–∫–∞: https://railsautoscale.com/request-queue-time/

<!--
–ò –Ω—é–∞–Ω—Å —ç—Ç–æ—Ç ‚Äî –æ—á–µ—Ä–µ–¥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ –ü–æ–¥–∞.

–ü—Ä–µ–¥—Å—Ç–∞–≤–∏–º —Ç–∏–ø–∏—á–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –º–æ–µ–≥–æ —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π Ruby on Rails ‚Äî¬†–≤ –ø–æ–¥–µ –∑–∞–ø—É—â–µ–Ω –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–∑–∞—á–µ–º —Ç–∞–∫ –¥–µ–ª–∞—Ç—å, –º—ã –µ—â—ë –ø–æ–≥–æ–≤–æ—Ä–∏–º), –æ–Ω –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–æ–ø—É—Å—Ç–∏–º 2 –∑–∞–ø—Ä–æ—Å–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ. –ö–æ–≥–¥–∞ –æ–±–∞ –≤–æ—Ä–∫–µ—Ä–∞ –∑–∞–Ω—è—Ç—ã, –≤—Ö–æ–¥—è—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞—á–∏–Ω–∞—é—Ç –∫–æ–ø–∏—Ç—å—Å—è –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∞ ¬´–≤—Ö–æ–¥–µ¬ª,–≤ –º–∞—Å—Ç–µ—Ä-–ø—Ä–æ—Ü–µ—Å—Å–µ, –≤ –æ–∂–∏–¥–∞–Ω–∏–∏, –ø–æ–∫–∞ –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è —Å–≤–æ–±–æ–¥–Ω—ã–π –≤–æ—Ä–∫–µ—Ä.
-->

---
class: text-xl
---

## –ü—Ä–∏—Ö–æ–¥–∏—Ç –Ω–∞–≥—Ä—É–∑–∫–∞ üèãÔ∏è

 1. –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –æ–¥–∏–Ω –ø–æ–¥ –∏ ¬´–∑–∞–±–∏–≤–∞—é—Ç¬ª –µ–≥–æ

 2. ¬´–ó–∞–±–∏—Ç—ã–π¬ª –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤ –ø–æ–¥–µ –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ liveness ü•Ä

 3. Kubernetes —É–±–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä üíÄ

 4. –ò —Ç—É—Ç –∂–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ –∑–∞–Ω–æ–≤–æ, –Ω–æ —ç—Ç–æ –∑–∞–Ω–∏–º–∞–µ—Ç –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è‚Ä¶ ‚åö

 4. –ù–∞ –≤—Ä–µ–º—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –Ω–∞ –¥—Ä—É–≥–∏–µ –ø–æ–¥—ã –ø—Ä–∏—Ö–æ–¥–∏—Ç –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤.

 5. GOTO 1 ü§°

<div class="text-xl border border-2 border-red-600 rounded-lg p-4 my-12">
–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è liveness-–ø—Ä–æ–±–∞ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π —É–±—å—ë—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –ø–æ–¥ –∑–∞ –ø–æ–¥–æ–º!
</div>

<!--
–ò –≤–æ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –∞–Ω–æ–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –∏–ª–∏ –¥–∞–∂–µ –Ω–µ —Ç–∞–∫. –£ –Ω–∞—Å –∫–∞–∫–∏–µ-—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –Ω–∞—á–∏–Ω–∞—é—Ç –Ω–µ–æ–±—ã—á–∞–π–Ω–æ –¥–æ–ª–≥–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è. –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞–∂–∞–ª–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–∏–Ω—É—Ç–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞ –∏ —Ç–∞–∫ —É–∂ –ø–æ–≤–µ–∑–ª–æ, —á—Ç–æ –≤—Å–µ —ç—Ç–∏ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ø–∞–ª–∏ –Ω–∞ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏ –∑–∞–±–∏–ª–∏ –µ–≥–æ –ø–æ–¥ –∑–∞–≤—è–∑–∫—É. –ß—Ç–æ –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç? –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ liveness –Ω–∞—á–∏–Ω–∞—é—Ç —Å—Ç–æ—è—Ç—å –≤ –æ—á–µ—Ä–µ–¥–∏ –≤–º–µ—Å—Ç–µ —Å–æ –≤—Å–µ–º–∏, ¬´–∫—É–±¬ª —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–≤–∏—Å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –µ–≥–æ. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–æ–ª–≥–æ –∏ –º—É—á–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —É–≤–∏–¥–µ–≤ –æ—à–∏–±–∫—É, –±—ã—Å—Ç—Ä–æ –∂–º—É—Ç F5 (–∏–ª–∏, —á—Ç–æ —Ö—É–∂–µ, –∑–∞–ø—Ä–æ—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è —Å–∞–º).
-->

---
layout: image
image: /images/death-knocking-on-doors.png
class: relative
---

<div class="absolute bottom-0 text-sm">
–ö–∞—Ä—Ç–∏–Ω–∫–∞: https://knowyourmeme.com/photos/1901279-death-knocking-on-doors
</div>

<!--
–ò –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è! –ó–∞–±–∏–≤–∞–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–π –ø–æ–¥ –∏ —É–±–∏–≤–∞–µ—Ç—Å—è. –û—Å—Ç–∞–≤—à–∏–µ—Å—è –±–µ—Ä—É—Ç –Ω–∞ —Å–µ–±—è –ø–æ–≤—ã—à–µ–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É –∏ —É –Ω–∏—Ö –æ—á–µ—Ä–µ–¥—å –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞—á–∏–Ω–∞–µ—Ç —Ä–∞—Å—Ç–∏ —É–∂–µ –≤–ø–æ–ª–Ω–µ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –í –∏—Ç–æ–≥–µ —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞—Ä–∞—Å—Ç–∞–µ—Ç –ª–∞–≤–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ –∏ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ –ª–µ–∂–∏—Ç.
-->

---
layout: two-cols
class: relative
---

## –ß—Ç–æ –∂–µ –¥–µ–ª–∞—Ç—å?

–ü—É—Å—Ç–∏—Ç—å liveness –ø—Ä–æ–±—É –≤ –æ–±—Ö–æ–¥!

```yaml {6}
containers:
  - name: app
    livenessProbe:
      httpGet:
        path: /health
        port: 8080 # ‚Üê –¥—Ä—É–≥–æ–π –ø–æ—Ä—Ç
      timeoutSeconds: 3
      periodSeconds: 10
    readinessProbe:
      httpGet:
        path: /health
        port: 80
      timeoutSeconds: 3
      periodSeconds: 10
```

::right::

<img src="/images/do-it-the-right-way.png" class="scaled-image p-12">

<div class="absolute bottom-0 text-xs">
–ö–∞—Ä—Ç–∏–Ω–∫–∞: <a href="https://www.behance.net/gallery/35173039/Stickers-for-another-one-IT-conference-(DUMP2016)" target="_blank">behance.net/gallery/35173039/Stickers-for-another-one-IT-conference-(DUMP2016)</a>
</div>

<!--
–†–µ—à–µ–Ω–∏–µ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ—Å—Ç–æ –∏ –∫–æ–Ω—Ç—Ä-–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ‚Äî¬†–Ω—É–∂–Ω–æ –ø—É—Å—Ç–∏—Ç—å liveness –ø—Ä–æ–±—É –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç readiness ‚Äî –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É –∏–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –Ω–µ –∑–∞–ø—Ä–æ—Å–∞, –∞ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∫–æ–º–∞–Ω–¥—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ. –í –æ–±—â–µ–º, —á–µ—Ä–µ–∑ ¬´—á—ë—Ä–Ω—ã–π —Ö–æ–¥¬ª.
-->

---

## Healthcheck'–∏: –∏—Ç–æ–≥–æ

 1. **Liveness —Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ ¬´—á—ë—Ä–Ω—ã–π —Ö–æ–¥¬ª**

    –ü–æ–¥–Ω–∏–º–∏—Ç–µ listener –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ä—Ç—É, –∫—É–¥–∞ –±—É–¥–µ—Ç —Ö–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–æ–±–∞.

    <div class="text-xl border border-2 border-red-600 rounded-lg p-4 my-4">
    Kubernetes –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–±–∏–≤–∞—Ç—å –≤–∞—à–∏ –ø–æ–¥—ã –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π!
    </div>

 2. **Readiness —Ö–æ–¥–∏—Ç –≤–º–µ—Å—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏**

    –ü–æ–∑–≤–æ–ª—å—Ç–µ ¬´–∑–∞–±–∏—Ç–æ–º—É¬ª –ø–æ–¥—É –≤—ã–π—Ç–∏ –∏–∑ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∏ –∏ ¬´–æ—Å—Ç—ã—Ç—å¬ª.

    –¢–∞–π–º–∞—É—Ç –Ω—É–∂–Ω–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏, –æ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –º–∞–ª.

    –°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞–ª–∏—á–∏–µ–º –Ω–µ–≥–æ—Ç–æ–≤—ã—Ö –ø–æ–¥–æ–≤ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ!

<div class="text-xl border border-2 border-green-600 rounded-lg p-4 my-8">
<strong>–ú–æ—Ä–∞–ª—å</strong>: –¥–µ–ª–∞–π—Ç–µ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç—ã!
</div>

<!--
–ö–æ–Ω–µ—á–Ω–æ, –µ—Å—Ç—å –æ–ø–∞—Å–Ω–æ—Å—Ç—å, —á—Ç–æ –æ–Ω–∞ –ø—Ä–∏ —ç—Ç–æ–º –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –¥–µ—Ç–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å ¬´—Å–º–µ—Ä—Ç—å¬ª –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ä—Ç—É ‚Äî –æ–± —ç—Ç–æ–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ–∑–∞–±–æ—Ç–∏—Ç—å—Å—è —è–≤–Ω–æ, –Ω–æ –∏ readiness-–ø—Ä–æ–±–∞ –ø–æ–¥—Å—Ç—Ä–∞—Ö—É–µ—Ç (–Ω–∞ –Ω–µ—ë —Ç–æ–∂–µ –Ω—É–∂–µ–Ω –∞–ª–µ—Ä—Ç –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ)
-->

---
layout: footnote
footnoteClass: text-sm
---

## –°–ª–µ–¥–∏—Ç–µ –∑–∞ –æ—á–µ—Ä–µ–¥—å—é –∑–∞–ø—Ä–æ—Å–æ–≤!

**–í—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏ ‚Äî —ç—Ç–æ –≥–ª–∞–≤–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞**, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–Ω–∞ –ø—Ä–µ–¥–µ–ª–µ¬ª. **–í—ã–≤–µ–¥–∏—Ç–µ –µ—ë —Å–µ–±–µ –≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.**

- –ï—Å–ª–∏ –æ–Ω–∞ –æ—â—É—Ç–∏–º–æ –±–æ–ª—å—à–µ 0 ‚Äî –Ω–∞–¥–æ —Å–∫–µ–π–ª–∏—Ç—å—Å—è –≤–≤–µ—Ä—Ö (–≤ Kubernetes –µ—Å—Ç—å Horizontal Pod Autoscaler)

- –ï—Å–ª–∏ –æ–Ω–∞ –≤—Å–µ–≥–¥–∞ —Å—Ç—Ä–æ–≥–æ 0 ‚Äî –º–æ–∂–Ω–æ –ø–æ–¥—É–º–∞—Ç—å –æ —Å–∫–µ–π–ª–∏–Ω–≥–µ –≤–Ω–∏–∑.

<div class="text-sm border border-2 border-green-600 rounded-lg p-4 my-8">
–°–ª–µ–¥–∏—Ç–µ –∑–∞ USE –∏ RED –º–µ—Ç—Ä–∏–∫–∞–º–∏, –∫–æ–≥–¥–∞ –¥–µ–ª–æ –∫–∞—Å–∞–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏!

 - Utilization: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–≤–æ–±–æ–¥–Ω—ã—Ö –≤–æ—Ä–∫–µ—Ä–∞
 - Saturation: –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –≤–æ—Ä–∫–µ—Ä–∞ (95p)
 - Errors: –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–æ–≤
 - Duration: –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ (95p)

</div>


::footnote::

USE method: https://www.brendangregg.com/usemethod.html

RED method: https://grafana.com/blog/2018/08/02/the-red-method-how-to-instrument-your-services/

<!--
–ù—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –æ—á–µ—Ä–µ–¥–∏ ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å –≤–∞–∂–Ω–∞—è –º–µ—Ç—Ä–∏–∫–∞. –í–∞–∂–Ω–µ–µ, —á–µ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä.
–ò–º–µ–Ω–Ω–æ –Ω–∞ —Ç–∞–∫–∏–µ –º–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞—Å–∫–æ–ª—å–∫–æ ¬´–Ω–∞—Å—ã—â–µ–Ω–æ¬ª –Ω–∞–≥—Ä—É–∑–∫–æ–π –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –Ω—É–∂–Ω–æ –ª–∏ –≤–∞–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –∫—É–¥–∞.

–ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å—ã —É –≤–∞—Å –≤ –æ—á–µ—Ä–µ–¥–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∂–¥—É—Ç ‚Äî¬†—É –≤–∞—Å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –≤—ã –∑—Ä—è —É—Å–∫–æ—Ä—è–µ—Ç–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ –ø–æ—Ç–µ–ø–ª–µ–Ω–∏–µ (–∏  –ø–µ—Ä–µ–ø–ª–∞—á–∏–≤–∞–µ—Ç–µ –∑–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É).

–ò –≤–æ–æ–±—â–µ, —Ö–æ—Ä–æ—à–∏–π —Å–æ–≤–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ –º–µ—Ç—Ä–∏–∫–∞–º–∏, –æ–ø–∏—Å–∞–Ω–Ω—ã–º–∏ –≤ USE –∏ RED –º–µ—Ç–æ–¥–æ–ª–æ–≥–∏—è—Ö.
-->

---
layout: footnote
footnoteClass: text-sm
---

## –ê –∫–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è-—Ç–æ?

<p class="my-8 text-xl">Kubernetes Horizontal Pod Autoscaler!</p>

<div class="flex">
<Youtube id="B1j5SdzlRPQ" />
<qr-code url="https://youtu.be/B1j5SdzlRPQ" class="ml-24 w-48 h-48 px-0 py-0" caption="–í–∏–¥–µ–æ" />
<qr-code url="https://speakerdeck.com/dragonsmith/razbiraiem-avtoskieilingh-v-kubernetes" class="ml-24 w-48 h-48 px-0 py-0" caption="–°–ª–∞–π–¥—ã" />
</div>

<div class="border border-2 border-green-600 rounded-lg p-4 my-12">
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ USE-–º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è!
</div>


::footnote::

–°–ª–∞–π–¥—ã: https://speakerdeck.com/dragonsmith/razbiraiem-avtoskieilingh-v-kubernetes

<!--
–ù—É –∞ –∑–∞ –æ—Ç–≤–µ—Ç–æ–º –Ω–∞ –≤–æ–ø—Ä–æ—Å ¬´–∫–∞–∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è¬ª —è –≤–∞—Å –æ—Ç–ø—Ä–∞–≤–ª—é —Å–Ω–æ–≤–∞ –∫ –ö–∏—Ä—É ‚Äî –Ω–∞—à–µ–º—É –≥–ª–∞–≤–Ω–æ–º—É –ø–æ –≤—Å—è–∫–∏–º —Ç–∞–º Kubernetes'–∞–º.

–ù–æ –∫–æ—Ä–æ—Ç–∫–æ –≥–æ–≤–æ—Ä—è ‚Äî¬†–≤ ¬´–∫—É–±–µ¬ª –µ—Å—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç Horizontal Pod Autoscaler –∏ –æ–Ω —É–º–µ–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ –ª—é–±—É—é —Å—Ç–æ—Ä–æ–Ω—É –≥–ª—è–¥—è –Ω–∞ –ª—é–±—ã–µ –º–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã –µ–º—É —É–∫–∞–∂–µ—Ç–µ. –î–∞–∂–µ –∫–∞—Å—Ç–æ–º–Ω—ã–µ.
-->

---
layout: intro
---

# Requests –∏ limits

–ö–∞–∫ (–Ω–µ)–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ—Å–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∏ —É –∫–æ–≥–æ.

<!--
–ó–∞–∫–æ–Ω—á–∏–ª–∏ —Å –æ–¥–Ω–∏–º –Ω—é–∞–Ω—Å–æ–º ‚Äî¬†–ø–æ–π–¥—ë–º –∫ —Å–ª–µ–¥—É—é—â–∏–º.

–ò—Ç–∞–∫, Kubernetes –∞–±—Å—Ç—Ä–∞–≥–∏—Ä—É–µ—Ç –æ—Ç –Ω–∞—Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ –º–æ—â–Ω–æ—Å—Ç—å –Ω–∏–∂–µ–ª–µ–∂–∞—â–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤, –æ–Ω–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è –Ω–æ–¥–∞–º–∏, ¬´–∫—É–±¬ª –æ—Ç –Ω–∞—Å —ç—Ç—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç.

–ù–æ –≤—Å—ë –∂–µ –Ω–∞–º –Ω—É–∂–Ω–æ –∫–∞–∫-—Ç–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –Ω–∞—à–µ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é –±—É–¥—É—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –¥–ª—è –µ–≥–æ —Ä–∞–±–æ—Ç—ã –∏, –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è, —á—Ç–æ –∑–ª–æ–≤—Ä–µ–¥–Ω—ã–π –∏ –∑–∞–±–∞–≥–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–µ —Å–æ–∂—Ä—ë—Ç –≤—Å–µ —ç—Ç–∏ —Ä–µ—Å—É—Ä—Å—ã –≤ –∫–ª–∞—Å—Ç–µ—Ä–µ.
-->

---
layout: footnote
footnoteClass: text-xs relative
---

## Requests –∏ limits 101

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤ Pod'–µ:

```yaml
resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi
```

requests –∏ limits –¥–ª—è Pod ‚Äî¬†—Å—É–º–º–∞ –∑–Ω–∞—á–µ–Ω–∏–π –µ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

requests ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ k8s

limits ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —è–¥—Ä–∞ –û–° –Ω–∞ –Ω–æ–¥–∞—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞

cpu ‚Äî –∏–∑–º–µ—Ä—è—é—Ç—Å—è –≤ millicpu (—Ç—ã—Å—è—á–Ω—ã—Ö –¥–æ–ª—è—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ —è–¥—Ä–∞)

memory ‚Äî –∏–∑–º–µ—Ä—è—é—Ç—Å—è –≤ –±–∞–π—Ç–∞—Ö –∏ –∫—Ä–∞—Ç–Ω—ã—Ö (–º–µ–±–∏–±–∞–π—Ç—ã, –≥–µ–±–∏–±–∞–π—Ç—ã)

::footnote::

https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/

<qr-code url="https://kubernetes.io/docs/concepts/configuration/manage-resources-containers/" class="w-36 px-0 absolute bottom-0 right-0" />

<!--
–î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ –¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –Ω–∏—Ö. –ò –∫–∞–∫ –≤–∏–¥–∏—Ç–µ, –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º–∏.

–í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤—ã—Å—Ç—É–ø–∞—é—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –∏ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–º—è—Ç—å.

–ò –≤–æ—Ç —ç—Ç–∞ –≤—Å—è —à—Ç—É–∫–∞ ‚Äî¬†–ø—Ä–æ—Å—Ç–æ –æ–¥–∏–Ω —Å–ø–ª–æ—à–Ω–æ–π –Ω—é–∞–Ω—Å, –Ω–∞ –Ω—é–∞–Ω—Å–µ —Å–∏–¥–∏—Ç –∏ –Ω—é–∞–Ω—Å–æ–º –ø–æ–≥–æ–Ω—è–µ—Ç. –î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –ø–æ–±–ª–∏–∂–µ.

–î–ª—è –Ω–∞—á–∞–ª–∞, —Ä–µ–∫–≤–µ—Å—Ç—ã –∏ –ª–∏–º–∏—Ç—ã –æ–±—ä—è–≤–ª—è—é—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ, –∞ —Ä–µ–∫–≤–µ—Å—Ç—ã –∏ –ª–∏–º–∏—Ç—ã –ø–æ–¥–∞ –ø–æ–ª—É—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–ª–∞–¥—ã–≤–∞–Ω–∏–µ–º —Ä–µ–∫–≤–µ—Å—Ç–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –ø–æ–¥–µ.
-->

---
layout: two-cols
class: relative
---

## Requests 101

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ k8s –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è Pod'–æ–≤ –Ω–∞ –Ω–æ–¥—ã:

```yaml {2-4}
resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi
```

 - –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ —Ä–∞–Ω—Ç–∞–π–º–µ\*
 - –ù–µ —É—á–∏—Ç—ã–≤–∞—é—Ç —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ\*, —Ç–æ–ª—å–∫–æ requests –¥—Ä—É–≥–∏—Ö –ø–æ–¥–æ–≤

<div class="absolute bottom-0 text-xs">

\* –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ OOM, –Ω–æ –ø—Ä–æ —ç—Ç–æ –¥–∞–ª—å—à–µ

</div>

::right::

<img src="/images/requests-and-scheduling.png" class="scaled-image p-12">

<div class="absolute bottom-0 text-xs pl-12">

–ö–∞—Ä—Ç–∏–Ω–∫–∞: [–ò–ª—å—è –ß–µ—Ä–µ–ø–∞–Ω–æ–≤](https://github.com/deponian), –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —à–∫–æ–ª–∞ k8s

</div>

<!--
–†–µ–∫–≤–µ—Å—Ç—ã ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É Kubernetes –∫–∞–∫ –±—ã –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ –Ω–∞ –Ω–æ–¥–µ –ø–æ–¥ —ç—Ç–æ—Ç –ø–æ–¥. –¢.–µ. –µ—Å–ª–∏ —É –Ω–∞—à–µ–≥–æ –ø–æ–¥–∞ requests 200 milliCPU, —Ç–æ –Ω–∞ –æ–¥–Ω–æ—è–¥–µ—Ä–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –æ–Ω –º–æ–∂–µ—Ç –ø–æ—Å—Ç–∞–≤–∏—Ç—å 5 —Ç–∞–∫–∏—Ö –ø–æ–¥–æ–≤ –∏ –Ω–µ –±–æ–ª—å—à–µ.

–ù–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –≤—ã—à–µ –Ω–∞ –Ω–æ–¥–µ —É–∂–µ —Ç—Ä–∏ —Ç–∞–∫–∏—Ö –∫–æ–Ω—Ç–µ–π–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–Ω—è–ª–∏ 0,6 CPU. –ü—Ä–∏—á—ë–º –Ω–µ–≤–∞–∂–Ω–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–∞–Ω—è—Ç –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ. –û–Ω –º–æ–∂–µ—Ç –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—Ç—å, –∞ –º–æ–∂–µ—Ç –æ–Ω–∏ —Ç–∞–º –≤—Å–µ —Å —É–º–∞ —Å–æ—à–ª–∏ –∏ –∫—Ä–∏–ø—Ç—É –º–∞–π–Ω—è—Ç.
-->

---
layout: two-cols
class: relative
---

## Limits 101

–†–µ–∞–ª–∏–∑—É—é—Ç—Å—è —è–¥—Ä–æ–º –û–° –Ω–∞ –Ω–æ–¥–∞—Ö:

```yaml {5-7}
resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 400m
    memory: 512Mi
```

 - cpu –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥ CPU

 - memory –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç Out of Memory Killer

<!--
–õ–∏–º–∏—Ç—ã –∂–µ –ø–æ —Å—É—Ç–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç —è–¥—Ä–∞ Linux –Ω–∞ —Å–µ—Ä–≤–µ—Ä–∞—Ö. –ü–æ–º–Ω–∏–º, –¥–∞, —á—Ç–æ Docker ‚Äî —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å –æ–±–≤—è–∑–∫–∞ –Ω–∞–¥ –ª–∏–Ω—É–∫—Å–æ–≤—ã–º–∏ cgroups, –¥–∞?

–ò –µ—Å–ª–∏ —Å –ª–∏–º–∏—Ç–∞–º–∏ –Ω–∞ –ø–∞–º—è—Ç—å –≤—Å—ë –≤ —Ü–µ–ª–æ–º –æ—á–µ–≤–∏–¥–Ω–æ ‚Äî –∫–∞–∫ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–π–¥—ë—Ç —Ä–∞–º–∫–∏, —Ç–æ –∫ –Ω–µ–º—É –ø—Ä–∏–¥—ë—Ç OOM –∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—Å—è, —Ç–æ —Å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–º –≤—Å—ë –∫—É–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–π.
-->

---
layout: footnote
footnoteClass: text-xs relative
---

## –¢–∞–∫, —á—Ç–æ —Ç–∞–º –∑–∞ milliCPU –µ—â—ë?

<div class="grid grid-cols-5 grid-rows-2 gap-4">

<div class="text-sm col-span-3">

–í —Å–ª—É—á–∞–µ limits –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç CPU throttling ‚Äî –¥–æ–ª—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 100–º—Å.

–ê–¥–º–∏–Ω—ã, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç `CPUThrottlingHigh`!

</div>

<img src="/images/unconstrainedCPU_limits.png" class="scaled-image col-span-2 max-h-36"/>

<div class="col-span-3 text-sm">

```yaml {6}
resources:
  requests:
    cpu: 200m
    memory: 256Mi
  limits:
    cpu: 400m
    memory: 512Mi
```

</div>

<img src="/images/constrainedCPU_limits.png" class="scaled-image col-span-2 max-h-36"/>
</div>


<div class="border border-2 border-green-600 rounded-lg p-4 my-4 mr-36 text-sm">
–ù–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –¥—Ä–æ–±–Ω—ã–µ CPU limits –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –≥–¥–µ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞!
</div>


::footnote::

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://engineering.indeedblog.com/blog/2019/12/unthrottled-fixing-cpu-limits-in-the-cloud/

<qr-code url="https://engineering.indeedblog.com/blog/2019/12/unthrottled-fixing-cpu-limits-in-the-cloud/" class="absolute bottom-0 right-0 px-0 max-h-32" />

<!--
–ü–æ—Ç–æ–º—É —á—Ç–æ –Ω–∏ —Å –ø–µ—Ä–≤–æ–≥–æ, –Ω–∏ —Å–æ –≤—Ç–æ—Ä–æ–≥–æ –≤–∑–≥–ª—è–¥–∞ —Ä–µ—à–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –∑–Ω–∞—á–∏—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤ 0,4 —è–¥—Ä–∞? –≠—Ç–æ –≤–æ–æ–±—â–µ –∫–∞–∫ –ø–æ–Ω–∏–º–∞—Ç—å?

–ú–µ—Ö–∞–Ω–∏–∑–º–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–ø—É—Å–∫–∞—é—Ç –ª–∏–º–∏—Ç—ã –ø–æ CPU –Ω–µ—Å–∫–æ–ª—å–∫–æ, –Ω–æ —Å–∞–º—ã–π –Ω—é–∞–Ω—Å–æ–≤—ã–π –∏–∑ –Ω–∏—Ö‚Äî —ç—Ç–æ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

—É–∫–∞–∑—ã–≤–∞—è limit –ø–æ cpu, –≤—ã —É–∫–∞–∑—ã–≤–∞–µ—Ç–µ —Å–∫–æ–ª—å–∫–æ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –∏–∑ 100 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –±—É–¥–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–æ –∏—Å–ø–æ–ª–Ω—è—Ç—å—Å—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º –∏–∑ —ç—Ç–æ–π cgroup'—ã –∑–∞ –∫–∞–∂–¥—ã–µ 100 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥. –ü–µ—Ä–∏–æ–¥ –≤ 100 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ –∑–∞—Ö–∞—Ä–¥–∫–æ—Ä–∂–µ–Ω –≤ Kubernetes.

–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å—É –Ω—É–∂–Ω–æ 39 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É, —Ç–æ –æ–Ω –æ–±—Ä–∞–±–æ—Ç–∞–µ—Ç—Å—è –∑–∞ 39. –ê –µ—Å–ª–∏ 42 ‚Äî —Ç–æ —É–∂–µ –∑–∞ 102. –û–ø-–ø–∞!
-->

---
layout: footnote
footnoteClass: text-xs relative
---

## –£—Ç–∏–ª–∏–∑–∏—Ä—É–µ–º —è–¥—Ä–∞

<div class="grid grid-cols-2 gap-4">

<div>

<div class="text-sm border border-2 border-red-600 rounded-lg px-4 mb-4">

–ü—Ä–æ—Ü–µ—Å—Å –Ω–∞ —è–∑—ã–∫–∞—Ö —Å GIL (Ruby, Python) –Ω–µ –º–æ–∂–µ—Ç —É—Ç–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ —è–¥—Ä–æ —Ü–µ–ª–∏–∫–æ–º! **–ú–∞–∫—Å–∏–º—É–º –Ω–∞ 30-50%.**

</div>

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–∏** –ø—Ä–æ—Ü–µ—Å—Å—ã **–∏** –ø–æ—Ç–æ–∫–∏:

 - –ó–∞–ø—É—Å–∫–∞–π—Ç–µ 2-4 —Ä–∞–±–æ—á–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞ –Ω–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä <small>(—Ä–∞–±–æ—Ç–∞–µ—Ç CoW üêÆ)</small>

 - –ü–æ 4-6 –ø–æ—Ç–æ–∫–æ–≤ –≤ –∫–∞–∂–¥–æ–º

<div class="text-sm border border-2 border-green-600 rounded-lg px-4 my-4">

‚ûï –£–ª—É—á—à–∞–µ—Ç—Å—è —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≤–æ—Ä–∫–µ—Ä–æ–≤ –∑–∞ —Å—á—ë—Ç —Ä–∞–∑–¥–∞—á–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—â–∏–º –≤–æ—Ä–∫–µ—Ä–∞–º.

</div>

</div>

<img src="/images/puma-request-queue.png" class="scaled-image text-center mx-auto max-h-96">

</div>

::footnote::

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: https://www.speedshop.co/2017/10/12/appserver.html

<qr-code url="https://www.speedshop.co/2017/10/12/appserver.html" class="px-0 absolute bottom-0 right-0 max-h-32" />


<!--

–ò—Ç–∞–∫, –º—ã –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ –Ω–∞–¥–æ –≤—ã–¥–∞–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã–µ —è–¥—Ä–∞ —Ü–µ–ª–∏–∫–æ–º, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –∑–∞–º–µ–¥–ª–µ–Ω–∏—è –∏–∑-–∑–∞ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–∞. –¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –Ω–æ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞ ‚Äî¬†–∫–∞–∫ —Ç–µ–ø–µ—Ä—å —ç—Ç–∏ —è–¥—Ä–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ –ø–æ–ª–Ω–æ–π, —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–ø–ª–∞—á–∏–≤–∞—Ç—å –∑–∞ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—â–∏–µ —Ä–µ—Å—É—Ä—Å—ã?

–ù—é–∞–Ω—Å —Ç—É—Ç –≤ —Ç–æ–º, —á—Ç–æ –º–Ω–æ–≥–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ —è–∑—ã–∫–∏ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ Ruby, –∫–æ—Ç–æ—Ä—ã–π –º—ã –Ω–µ–∂–Ω–æ –ª—é–±–∏–º –∏ –≤–æ–≤—Å—é –∏—Å–ø–æ–ª—å–∑—É–µ–º, –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –Ω–µ —è–≤–ª—è—é—Ç—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º–∏ –∏, –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –Ω–µ–ª—å–∑—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞–≥—Ä—É–∑–∏—Ç—å –æ–¥–Ω–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ —è–¥—Ä–æ. –•–æ—Ç—è, –≤ —Å–ª—É—á–∞–µ Ruby, –æ–¥–∏–Ω –ø–æ—Ç–æ–∫ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å Ruby-–∫–æ–¥, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –≤ —ç—Ç–æ –≤—Ä–µ–º—è –º–æ–≥—É—Ç –∂–¥–∞—Ç—å –æ—Ç–≤–µ—Ç–∞ –æ—Ç –±–∞–∑—ã –∏–ª–∏ –æ—Ç —Å–µ—Ç–∏, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å XML –∏ JSON –Ω–∞—Ç–∏–≤–Ω—ã–º–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º–∏ –∏, –∫–∞–∑–∞–ª–æ—Å—å –±—ã, –¥–æ–ª–∂–Ω—ã –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç—Ä–µ–¥–æ–≤ –∑–∞–±–∏–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –Ω–∞ 100%, –Ω–æ –Ω–µ—Ç. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –±–æ–ª—å—à–µ 50% —É–≤–∏–¥–µ—Ç—å —Å–ª–æ–∂–Ω–æ.

–†–µ—à–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Å—Ç–∞—Ä–æ –∫–∞–∫ –º–∏—Ä, –Ω–æ –æ—á–µ–Ω—å –∫–æ–Ω—Ç—Ä-–∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –≤ —ç–ø–æ—Ö—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏–∏ ‚Äî¬†–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—É—é –≥–∏–±—Ä–∏–¥–Ω—É—é –º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω—É—é –∏ –º–Ω–æ–≥–æ—Ç—Ä–µ–¥–æ–≤—É—é —Å—Ö–µ–º—É, –≥–¥–µ –º–∞—Å—Ç–µ—Ä-–ø—Ä–æ—Ü–µ—Å—Å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ —Ä–∞–∑–¥–∞—ë—Ç –∏—Ö —Ä–∞–±–æ—á–∏–º –ø—Ä–æ—Ü–µ—Å—Å–∞–º, –∫–æ—Ç–æ—Ä—ã–µ —Ñ–æ—Ä–∫–∞–µ—Ç –æ—Ç —Å–µ–±—è. –õ–∏–º–∏—Ç –∏ –ø–æ –ø–∞–º—è—Ç–∏ –∏ –ø–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—É –¥–µ–π—Å—Ç–≤—É–µ—Ç –Ω–∞ –≤—Å—é —ç—Ç—É –≥—Ä—É–ø–ø—É –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Ä–∞–∑–æ–º –∏ —Ç–∞–∫ –º—ã –º–æ–∂–µ–º –ø–æ–ª—É—á–∏—Ç—å –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥–∞ –∏ –ø–æ–ª–Ω—É—é —É—Ç–∏–ª–∏–∑–∞—Ü–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞. –ü—Ä–∏ —ç—Ç–æ–º –µ—â—ë –∏ –ø–∞–º—è—Ç—å —ç–∫–æ–Ω–æ–º–∏—Ç—Å—è –∑–∞ —Å—á—ë—Ç —Ç–µ—Ö–Ω–∏–∫–∏ copy-on-write —è–¥—Ä–∞ Linux.

–ë–æ–Ω—É—Å–æ–º –µ—â—ë –∏ —É–ª—É—á—à–∞–µ—Ç—Å—è —É—Ç–∏–ª–∏–∑–∞—Ü–∏—è –≤–æ—Ä–∫–µ—Ä-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –ø–æ—Å–∫–æ–ª—å–∫—É –º–∞—Å—Ç–µ—Ä-–ø—Ä–æ—Ü–µ—Å—Å –∑–Ω–∞–µ—Ç, –∫—Ç–æ –∏–∑ –≤–æ—Ä–∫–µ—Ä–æ–≤ —Å–µ–π—á–∞—Å –∑–∞–Ω—è—Ç, –∞ –∫—Ç–æ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞–µ—Ç –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –∏–º–µ–Ω–Ω–æ —Å–≤–æ–±–æ–¥–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É. –í —Å–ª—É—á–∞–µ, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –≤ –∫–∞–∂–¥–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ø–æ –æ–¥–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å—Å—É –∏ –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–∏–ª–∞–º–∏ –∫—É–±–æ–≤–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø—Ä–æ—Å—Ç–æ–π, –µ—Å–ª–∏ –Ω–µ —Å–∫–∞–∑–∞—Ç—å —Ç—É–ø–æ–π, –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª –∫ iptables, —Ç–æ —Å–µ—Ä–≤–∏—Å –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–¥–∞—ë—Ç –∫–æ–Ω–Ω–µ–∫—Ç—ã round robin'–æ–º –∏ —á–∞—Å—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ —á–∞—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ø—Ä–æ—Å—Ç–∞–∏–≤–∞—é—Ç –±–µ–∑ –¥–µ–ª–∞, –∞ —á–∞—Å—Ç—å –∑–∞–Ω—è—Ç—ã –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏ –µ—â—ë –∫–æ–ø—è—Ç –∑–∞–ø—Ä–æ—Å—ã –≤ –æ—á–µ—Ä–µ–¥–∏.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —É–∫—Ä—É–ø–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ —Å –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ —É–º–µ–Ω—å—à–∏—Ç—å –∑–∞–¥–µ—Ä–∂–∫—É –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞ —Å—á—ë—Ç —É–≤–µ–ª–∏—á–µ–Ω–∏—è —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –Ω–æ –∏ –∑–∞ —Å—á—ë—Ç –±–æ–ª–µ–µ —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–π —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —Å–∞–º–∏—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∞ —ç—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É. –°–º–æ—Ç—Ä–∏—Ç–µ, —Å—Ä–∞–∑—É –¥–≤–∞ –Ω—é–∞–Ω—Å–∞ –Ω–∞ –æ–¥–∏–Ω —Å–ª–∞–π–¥ –ø–æ–ª—É—á–∏–ª–æ—Å—å!

–í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π —Ö–æ–ª–∏–≤–∞—Ä –ø—Ä–æ –ø—Ä–æ—Ü–µ—Å—Å—ã vs –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã (–Ω–∞ –±—É–¥—É—â–µ–µ): https://evilmartians.slack.com/archives/CBWBNDTHT/p1556540922007900

-->

---
layout: footnote
footnoteClass: text-xs relative
---

## Requests √ó Limits = QoS

–í —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—á–µ—Ç–∞–Ω–∏—è—Ö —Ä–µ–∫–≤–µ—Å—Ç–æ–≤ –∏ –ª–∏–º–∏—Ç–æ–≤ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –¥—Ä–∞–º–∞—Ç–∏—á–Ω–æ:

<div class="grid grid-cols-5 gap-4">

<div class="text-sm col-span-3">

 1. `Guaranteed` ‚Äî requests = limits
    - –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤—ã–¥–∞—ë—Ç—Å—è CPU
    - —É–±–∏–≤–∞—é—Ç—Å—è –ø–æ OOM –ø–æ—Å–ª–µ–¥–Ω–∏–º–∏
 2. `Burstable` ‚Äî requests ‚â† limits
    - –º–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CPU –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ
    - —É–±–∏–≤–∞—é—Ç—Å—è –ø–æ—Å–ª–µ BestEffort, –≤ –ø–æ—Ä—è–¥–∫–µ ¬´–∂–∞–¥–Ω–æ—Å—Ç–∏¬ª
 3. `BestEffort` ‚Äî –Ω–µ—Ç –Ω–∏ requests –Ω–∏ limits
    - CPU –≤—ã–¥–∞—ë—Ç—Å—è –≤ –ø–æ—Å–ª–µ–¥–Ω—é—é –æ—á–µ—Ä–µ–¥—å
    - –ü–µ—Ä–≤—ã–º–∏ —É–±–∏–≤–∞—é—Ç—Å—è OOM-–∫–∏–ª–ª–µ—Ä–æ–º

<div class="border border-2 border-green-600 rounded-lg p-4 my-4">
–í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏ requests –∏ limits!
</div>


</div>

<img src="/images/qos-requests-limits.png" class="scaled-image col-span-2">

</div>

::footnote::

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏ –≤ Kubernetes ‚Äî habr.com/ru/company/flant/blog/459326/](https://habr.com/ru/company/flant/blog/459326/)

<qr-code url="https://habr.com/ru/company/flant/blog/459326/" class="px-0 absolute right-0 bottom-0 max-h-32" />

<!--
–ò –ø–æ—Å–ª–µ–¥–Ω–∏–π –Ω–∞ —Å–µ–≥–æ–¥–Ω—è –Ω—é–∞–Ω—Å –ø—Ä–æ —Ä–µ–∫–≤–µ—Å—Ç—ã –∏ –ª–∏–º–∏—Ç—ã. –í —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–æ—á–µ—Ç–∞–Ω–∏—è—Ö –æ–Ω–∏ –≤—ã–¥–∞—é—Ç —Ä–∞–∑–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å QoS –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

–£—Ä–æ–≤–Ω—è —Ç—Ä–∏ –∏ –æ–Ω–∏ –≤–æ—Ç —Ç–∞–∫ –≤–æ—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ –æ—á–µ–≤–∏–¥–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –≤—ã–¥–∞—é—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –≤ –∫–∞–∫–∏—Ö —Å–æ—á–µ—Ç–∞–Ω–∏—è—Ö –≤—ã —É–∫–∞–∑–∞–ª–∏ –∏–ª–∏ –Ω–µ —É–∫–∞–∑–∞–ª–∏ —Ä–µ–∫–≤–µ—Å—Ç—ã –∏–ª–∏ –ª–∏–º–∏—Ç—ã.

Guaranteed –¥–∞—ë—Ç —Å–∞–º—É—é –ª—É—á—à—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –Ω–æ —Ü–µ–Ω–æ–π –Ω–µ–¥–æ–∑–∞–≥—Ä—É–∑–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞.

Burstable –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–ø—Ä–æ–¥–∞–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä –∏ –∏–∑–±–µ–∂–∞—Ç—å –µ–≥–æ –ø—Ä–æ—Å—Ç–æ—è, —á—Ç–æ –Ω–µ–∏–∑–±–µ–∂–Ω–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ Guaranteed.

BestEffort –≤—ã –≤—Ä—è–¥ –ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–æ–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–æ–Ω–æ –±—É–¥–µ—Ç —Ç–æ—Ä–º–æ–∑–∏—Ç—å –∏ –∏–Ω–æ–≥–¥–∞ –ø—Ä–∏–±–∏–≤–∞—Ç—å—Å—è), –ø–æ—ç—Ç–æ–º—É –≤—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ –∏ —Ä–µ–∫–≤–µ—Å—Ç—ã –∏ –ª–∏–º–∏—Ç—ã. –ò–ª–∏ —Ö–æ—Ç—è –±—ã —Ä–µ–∫–≤–µ—Å—Ç—ã.
-->

---
layout: intro
---

# –ù—É –≤—Å—ë

–ù—É –ø–æ—á—Ç–∏.

---
layout: footnote
footnoteClass: text-sm
---

## –ù–∞–º –Ω—É–∂–Ω—ã —Ç–≤–æ–∏ –º–æ–∑–≥–∏!

<a href="https://evl.ms/jobs?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes">
<img class="mx-auto text-center max-h-96" src="/images/evl-ms-jobs-qrcode-trampoline-slides.png" />
</a>

::footnote::

–ò—â–µ–º –¥–æ–±—Ä–æ–≤–æ–ª—å—Ü–µ–≤, —á—Ç–æ–±—ã –ø—Ä–∏—á–∏–Ω—è—Ç—å –¥–æ–±—Ä–æ –Ω–∞ –≤—Å–µ–π –ó–µ–º–ª–µ –∏ –∑–∞ –µ—ë –ø—Ä–µ–¥–µ–ª–∞–º–∏: [evl.ms/jobs](https://evl.ms/jobs?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes)

<!-- –ú–∞—Ä—Å –∑–æ–≤—ë—Ç! –î–∞–≤–∞–π—Ç–µ –ø—Ä–∏—á–∏–Ω—è—Ç—å –¥–æ–±—Ä–æ –≤–º–µ—Å—Ç–µ –Ω–∞ –≤—Å–µ–π –ó–µ–º–ª–µ! –ï—Å–ª–∏ –≤–∞–º –Ω—Ä–∞–≤–∏—Ç—Å—è –∫–æ–ø–∞—Ç—å—Å—è –≤ —Ç–∞–∫–∏—Ö –Ω—é–∞–Ω—Å–∞—Ö, –≤—ã –±–æ–ª–µ–µ—Ç–µ –∑–∞ –∫–∞—á–µ—Å—Ç–≤–æ —Å–≤–æ–µ–π —Ä–∞–±–æ—Ç—ã –∏ –Ω–µ –∂–µ–ª–∞–µ—Ç–µ –ø–æ–≤—ã—à–∞—Ç—å —ç–Ω—Ç—Ä–æ–ø–∏—é –ø–æ—á—ë–º –∑—Ä—è ‚Äî¬†–ø—Ä–∏—Ö–æ–¥–∏—Ç–µ –∫ –Ω–∞–º. –° –Ω–∞—Å –ø–æ—á—ë—Ç, —Å–ª–∞–≤–∞, –¥–µ–Ω—å–≥–∏, –ø–æ–º–æ—â—å —Å —Ä–µ–ª–æ–∫–∞—Ü–∏–µ–π. –ù—É–∂–Ω—ã —Ñ—Ä–æ–Ω—Ç—ã, –±—ç–∫–∏, –∞–¥–º–∏–Ω—ã ‚Äî¬†–≤—Å–µ! -->

---

# –í–Ω–∏–º–∞–Ω–∏–µ! –í–Ω–∏–º–∞–Ω–∏–µ!
## –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–Ω–∏–º–∞–Ω–∏–µ!

<div class="grid grid-cols-4 grid-rows-3 mt-16 gap-4">

<div class="justify-self-end">
<img alt="Andrey Novikov" src="https://secure.gravatar.com/avatar/d0e95abdd0aed671ebd0920c16d393d4?s=512" class="w-32 h-32 scaled-image" />
</div>

<ul class="list-none col-span-2">
<li><a href="https://github.com/Envek"><logos-github-icon /> @Envek</a></li>
<li><a href="https://t.me/envek"><logos-telegram /> @Envek</a></li>
<li><a href="https://twitter.com/Envek"><logos-twitter /> @Envek</a></li>
<li><a href="https://www.instagram.com/Envek"><logos-instagram-icon /> @Envek</a></li>
</ul>

<div>
<qr-code url="https://github.com/Envek" caption="github.com/Envek" class="w-36" />
</div>

<div class="justify-self-end row-span-2">
<a href="https://evilmartians.com/"><img alt="Evil Martians" src="/images/01_Evil-Martians_Logo_v2.1_RGB.svg" class="w-32 h-32 scaled-image" /></a>
</div>

<div class="row-span-2 col-span-2">

- <logos-telegram />  [@evilmartians](https://t.me/evilmartians?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes)
- <logos-twitter /> [@evilmartians_ru](https://twitter.com/evilmartians_ru/?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes)
- <logos-instagram-icon /> [@evil.martians](https://www.instagram.com/evil.martians/?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes)

–í–∞–∫–∞–Ω—Å–∏–∏: [evilmartians.com/jobs](https://evilmartians.com/jobs/?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes)

–ë–ª–æ–≥: [evilmartians.com/chronicles](https://evilmartians.com/chronicles/?utm_source=trampoline&utm_medium=slides&utm_campaign=nuance-on-kubernetes)
</div>

<div>
<qr-code url="https://taplink.cc/evil.martians" caption="Evil Martians: links" class="w-36" />
</div>
</div>

<style>
  ul a { border-bottom: none !important; }
  ul { list-style-type: none !important; }
  ul li { margin-left: 0; padding-left: 0; }
</style>
